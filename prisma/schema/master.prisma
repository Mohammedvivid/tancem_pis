model Analysis {
  id           String   @id @unique @default(uuid()) @db.VarChar(36)
  code         Int      @unique @default(autoincrement())
  analysisCode String   @map("analysis_code") @db.VarChar(10)
  type         String   @db.VarChar(50)
  description  String?  @db.VarChar(200)
  requestId    String?  @map("wf_request_id") @db.VarChar(36)
  materialId   String?  @map("material_id") @db.VarChar(36)
  sortOrder    Int      @default(0) @map("sort_order")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @default(now()) @updatedAt @map("updated_at")
  updatedById  String? @map("updated_by_id")@db.VarChar(36)
  createdById  String?  @map("created_by_id") @db.VarChar(36)
  isActive     Boolean  @default(true) @map("is_active")

  @@index([type])
  @@index([materialId])
  @@index([materialId, type])
  @@map("analysis")
}

model Problem {
	//? Primary Key
  id          String   @id @unique @default(uuid()) @db.VarChar(36)
	//? Readable reference Key
  code        Int      @unique @default(autoincrement())

	//? Columns
	name        String  @db.VarChar(50)
	description String? @db.VarChar(200)
	departmentId	String @db.VarChar(36) @map("department_id")
	problem	String  @db.VarChar(36)	@map("problem")

	//? Default columns
	sortOrder    Int      @default(0) @map("sort_order")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @default(now()) @updatedAt @map("updated_at")
  updatedById  String?	 @map("updated_by_id")@db.VarChar(36)
  createdById  String?  @map("created_by_id") @db.VarChar(36)
  isActive     Boolean  @default(true) @map("is_active")
	ProblemCode ProblemCode[]

	@@index([departmentId])
	@@index([code])
	//? Table name in DB
	@@map("problem")
}

model ProblemCode {
	//? Primary Key
	id   String @id @unique @default(uuid())  @db.VarChar(36)

	//? Readable reference Key
	code Int    @unique @default(autoincrement())

	//? Columns
	problemId 	String? @map("problem_id")@db.VarChar(36)
	ProblemMaster Problem? @relation(fields: [problemId], references: [id])
	equipmentId 	String? @map("equipment_id")@db.VarChar(36)
	departmentId 	String? @map("department_id")@db.VarChar(36)
	problemcode Int @map("problem_code")
	//? Default columns
	createdAt   DateTime @default(now()) @map("created_at")
	updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
	createdById String? @db.VarChar(36) @map("created_by_id")
	updatedById String? @db.VarChar(36) @map("updated_by_id")
	isActive    Boolean  @default(true) @map("is_active")

	//? Indexing
	// @@index([])
	@@index([code])
  @@index([problemId])
  @@index([departmentId])
  @@index([code, problemId,departmentId])
	//? Table name in DB
	@@map("problem_code")
}

model TransactionType {
	//? Primary Key
	id   String @id @unique @default(uuid())
	//? Readable reference Key
	code Int    @unique @default(autoincrement())

	//? Columns
	name        String  @db.VarChar(50)
	//? Default columns
	createdAt   DateTime @default(now()) @map("created_at")
	updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
	createdById String? @db.VarChar(36) @map("created_by_id")
	updatedById String? @db.VarChar(36) @map("updated_by_id")
	isActive    Boolean  @default(true) @map("is_active")

	//? Foreign key references

	//? Indexing
	@@index([code])

	//? Table name in DB
	@@map("transaction_type")
}

model ProductionCategory {
	//? Primary Key
	id   String @id @unique @default(uuid())
	//? Readable reference Key
	code Int    @unique @default(autoincrement())

	//? Columns
	name        String  @db.VarChar(50)
	productCatagoryCode 			String 		@map("product_category_code")

	//? Default columns
	createdAt   DateTime @default(now()) @map("created_at")
	updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
	createdById String? @db.VarChar(36) @map("created_by_id")
	updatedById String? @db.VarChar(36) @map("updated_by_id")
	isActive    Boolean  @default(true) @map("is_active")

	//? Foreign key references

	//? Indexing
	@@index([code])
	@@index([productCatagoryCode])

	//? Table name in DB
	@@map("production_category")
}

model MaterialType {
  // Primary Key
  id   String @id @unique @default(uuid())
	//? Readable reference Key
  code Int    @unique @default(autoincrement())

  // Columns
  materialId String  @db.VarChar(50) @map("material_id")
	materialTypeMasterId String @db.VarChar(36) @map("material_type_id")

  // Default columns
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  createdById String? @db.VarChar(36) @map("created_by_id")
  updatedById String? @db.VarChar(36) @map("updated_by_id")
  isActive    Boolean  @default(true) @map("is_active")

  // Foreign key references
  materialTypeMaster MaterialTypeMaster @relation(fields: [materialTypeMasterId], references: [id])

  // Indexing
  @@index([code])

  // Table name
  @@map("material_type")
}

model MaterialTypeMaster {
  // Primary Key
  id   String @id @unique @default(uuid())
  code Int    @unique @default(autoincrement())

  // Columns
  name  String @db.VarChar(50)
  materialTypeCode String    @map("material_type_code")

  // Default columns
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  createdById String? @db.VarChar(36) @map("created_by_id")
  updatedById String? @db.VarChar(36) @map("updated_by_id")
  isActive    Boolean  @default(true) @map("is_active")

  // Relation (back reference)
  materialTypes MaterialType[]

	//? Foreign key references


  // Indexing
  @@index([code])

  // Table name
  @@map("material_type_master")
}

model MaterialAnalysis {
	//? Primary Key
	id   String @id @unique @default(uuid())
	//? Readable reference Key
	code Int    @unique @default(autoincrement())

	//? Columns
	materialId String  @db.VarChar(50) @map("material_id")
	analysisId String  @db.VarChar(50) @map("analysis_id")

	//? Default columns
	createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  createdById String? @db.VarChar(36) @map("created_by_id")
  updatedById String? @db.VarChar(36) @map("updated_by_id")
  isActive    Boolean  @default(true) @map("is_active")

	//? Foreign key references

	//? Indexing
	@@index([code])

	//? Table name in DB
	@@map("material_analysis")
}

model EquipmentOutputMaterialMapping {
	//? Primary Key
	id   String @id @unique @default(uuid())
	//? Readable reference Key
	code Int    @unique @default(autoincrement())

	//? Columns
	equipmentId 	String @db.VarChar(36) @map("equipment_id")
	materialId    String @db.VarChar(36) @map("material_id")

	//? Default columns
	createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  createdById String? @db.VarChar(36) @map("created_by_id")
  updatedById String? @db.VarChar(36) @map("updated_by_id")
  isActive    Boolean  @default(true) @map("is_active")

	//? Foreign key references

	//? Indexing
	@@index([code])
	@@index([equipmentId])
	@@index([materialId])

	//? Table name in DB
	@@map("equipment_output_material_mapping")
}

model AnnualMaterialBudget {
	//? Primary Key
	id   String @id @unique @default(uuid())
	//? Readable reference Key
	code Int    @unique @default(autoincrement())

	//? Columns
	financialYear String @db.VarChar(9) @map("financial_year")
	month					Int
	year					Int
	materialId  String 	@db.VarChar(36) @map("material_id")

	//? Default columns
	createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  createdById String? @db.VarChar(36) @map("created_by_id")
  updatedById String? @db.VarChar(36) @map("updated_by_id")
  isActive    Boolean  @default(true) @map("is_active")

	//? Foreign key references

	//? Indexing
	@@index([financialYear])
	@@index([materialId])
	@@index([code])

	//? Table name in DB
	@@map("annual_material_budget")
}